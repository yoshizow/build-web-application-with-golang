# 8.4 RPC
前の節でどのようにSocketとHTTPに基づいてネットワークアプリケーションを書くかご紹介しました。SocketとHTTPが採用しているのは"情報交換"パターン、すなわちクライアントがサーバに情報を一つ送信し、その後（一般的に）サーバが一定の情報を返すことでレスポンスとする、ようなものであると理解しました。双方は互いが発生させた情報を解析できるように、クライントとサーバ間が情報をやり取りする形式が締結されます。しかし独立した多くのアプリケーションは特にこのようなパターンを採用はしません。その代わり通常の関数をコールするのに似た方法で必要となる機能を完成させます。

RPCは関数をコールするモデルをネットワーク化したものです。クライアントはローカルの関数をコールするのと同じように、引数をひっくるめてネットワークを通じてサーバに送信します。サーバでは処理の中でそれを展開し実行します。そして、実行結果をクライアントにフィードバックします。

RPC（Remote Procedure Call Protocol） 、このリモートプロセスのコールプロトコルは、ネットワークを通してリモートコンピュータのプログラムにおいてリクエストするサービスです。低レイヤのネットワーク技術におけるプロトコルを理解する必要はありません。これは何らかの転送プロトコルの存在を仮定します。例えばTCPまたはUDPです。通信を行うプログラム間で情報データを簡単にやりとりすることができます。これを使って関数をコールするモデルをネットワーク化することができます。OSIネットワーク通信モデルで、RPCはデータリンク層とアプリケーション層を飛び越えます。RPCはネットワーク分散型の複数プログラムを含めてアプリケーションプログラムの開発を容易にします。

## RPCの動作原理

![](images/8.4.rpc.png?raw=true)

図8.8 RPCの動作プロセス図

実行時、クライアントマシンがサーバのRPCに対してコールを行うと、そこにはだいたい以下のような10ステップの操作があります：

- 1.クライアントハンドルをコールする。転送引数を実行する。
- 2.ローカルシステムのカーネルがネットワーク情報を送信する。
- 3.情報がリモートホストに送信される。
- 4.サーバハンドル情報を受け取り、引数を取り出す。
- 5.リモートプロセスを実行する。
- 6.実行されたプロセスは結果をサーバハンドルに返す。
- 7.サーバハンドルは結果を返し、リモートシステムのカーネルをコールする。
- 8.情報がローカルホストに送信される。
- 9.クライアントハンドルがカーネルから情報を取得する。
- 10.クライアントはハンドルが返すデータを受け取る。

## Go RPC
Go標準パッケージではすでにRPCをに対するサポートがされています。また、３つのレベルとなるRPC、HTTP、JSONRPCをサポートしています。しかしGoのRPCパッケージは唯一
